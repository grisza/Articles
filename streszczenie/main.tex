\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[OT4]{fontenc}
\usepackage{enumerate}
\usepackage{polski}
\usepackage[polish]{babel}
\usepackage{microtype}
\usepackage[useregional]{datetime2}
\usepackage{xparse}
\usepackage{calc}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage[unicode]{hyperref}% unicode is required for unicode pdf metadata
\usepackage{etoolbox}
\usepackage{ragged2e}
\author{Grzegorz Glonek}

\begin{document}	

	\begin{FlushLeft}
mgr inż. Grzegorz Glonek \hfill 	Łódź, \today \\					
	Promotor: dr hab. inż. Adam Wojciechowski
\end{FlushLeft}

\vspace*{2cm}
\Centering
STRESZCZENIE ROZPRAWY DOKTORSKIEJ\\
\vspace*{0.5cm}
\textbf{Hybrydowa metoda śledzenia ruchu człowieka \\w czasie rzeczywistym}\\

\vspace*{1.5cm}
\justify
\textbf{\underline{Teza:}} \textbf{Zastosowanie autorskiej, hybrydowej metody śledzenia ruchu kończyn człowieka, łączącej dane pochodzące z~sensora głębi i~sensorów inercyjnych, uwzględniającej kontekstowe charakterystyki pracy urządzeń, pozwala na bardziej precyzyjne śledzenie ruchu.}

\vspace*{1cm}
	W rozprawie wyróżniono następujące cele szczegółowe:
	\begin{enumerate}[1. ]
		\item zdefiniowanie charakterystyk działania oraz ograniczeń zastosowanych urządzeń pomiarowych;
	
		\item opracowanie oraz zaimplementowanie metod kompensacji ujawnionych i~mierzalnych ograniczeń wykorzystanych urządzeń pomiarowych;
			\item opracowanie autorskiej metody łączenia sygnałów pochodzących z urządzeń pomiarowych: kontrolera Microsoft Kinect oraz czujników inercyjnych. Omawiana metoda powinna uwzględniać kompensację ujawnionych ograniczeń wspomnianych urządzeń pomiarowych oraz powinna pracować z częstotliwością zbliżoną do częstotliwości pracy kontrolera Kinect, tj. $30Hz$;		
		\item zastosowanie opracowanej metody łączenia sygnałów do śledzenia kończyn wykonujących ruch w tempie charakterystycznym dla ćwiczeń rehabilitacyjnych.
	\end{enumerate}

\textbf{Ad. 2}: W celu opracowania metod kompensacji ograniczeń działania wykorzystywanych urządzeń pomiarowych, został wykonany szereg eksperymentów mających na celu ich ujawnienie i opisanie. Wykazane ograniczenia były zazwyczaj pominięte w oficjalnej dokumentacji wykorzystywanych urządzeń. Temat istotnych ograniczeń i niedokładności w działaniu wspomnianych urządzeń nie był także przedmiotem kompleksowych badań w świetle znanej autorowi literatury przedmiotu.

\textbf{Ad. 3}: Wszystkie, opisywane w znanej autorowi literaturze, metody łączenia danych z kontrolera Microsoft Kinect oraz z urządzeń inercyjnych opierają się na informacji o położeniu przestrzennym wybranych stawów. Większość z tych metod wykorzystuje mechanizm łączenia danych oparty o filtry Kalmana.

\textbf{Ad. 4}: W celu weryfikacji działania opracowanej metody, została ona przetestowana na zestawie ruchów ręki wykonywanych w kierunkach szczególnie problematycznych dla tych urządzeń pomiarowych. Oznacza to, że w trakcie ich wykonywania zostały uwypuklone ograniczenia kontrolera Microsoft Kinect lub czujników inercyjnych. Ruchy były wykonywane w tempie charakterystycznym dla ćwiczeń rehabilitacyjnych, tak aby nie przekroczyć zdolności rejestracyjnych wspomnianych urządzeń pomiarowych. Gdyby wykorzystać ruchy wykonywane z~dużą prędkością, które są charakterystyczne dla treningu sportowego, wówczas należałoby zastosować inne urządzenia pomiarowe, charakteryzujące się wyższą częstotliwością pracy. 

Aby zrealizować wszystkie wymienione powyżej cele szczegółowe, koniecznym okazało się m.in.:
\begin{enumerate}[1. ]
	\item kompleksowe zbadanie charakterystyk działania kontrolera Kinect oraz czujników inercyjnych;
    \item opracowanie metod kompensacji ujawnionych ograniczeń w działaniu wykorzystywanych urządzeń pomiarowych;
	\item opracowanie autorskiej metody łączenia danych z kontrolera Microsoft Kinect i czujników inercyjnych w oparciu o informacje o obrotach wybranych kości;
\end{enumerate}

Rozprawa została podzielona na pięć rozdziałów. W rozdziale 1 (str. 11) przedstawiono i usystematyzowano podstawowe pojęcia wykorzystywane w dalszej części pracy, sformułowano problem badawczy, cele szczegółowe rozprawy oraz jej tezę, a także uzasadniono motywację podjęcia badań. Rozdział 2 (str.~17) przedstawia aktualny stan wiedzy dotyczący obszaru prowadzonych badań, a~także wyniki badań własnych związanych z określeniem charakterystyk działania wykorzystywanych urządzeń pomiarowych. Zagadnieniami poruszonymi w tym rozdziale są systemy śledzenia ruchu, ich taksonomia oraz charakterystyka działania (roz. 2.1), komputerowe modele postaci ludzkiej (roz. 2.2), charakterystyki urządzeń pomiarowych: kontrolera Microsoft Kinect oraz czujników inercyjnych (roz. 2.3). Ostatni z podrozdziałów (roz. 2.4) przedstawia analizę literatury przedmiotu dotyczącą metod łączenia sygnałów pochodzących z optycznych, bezmarkerowych systemów śledzenia ruchu, z~sygnałami urządzeń inercyjnych. Podrozdział 2.3 jest realizacją pierwszego celu szczegółowego rozprawy doktorskiej. W rozdziale 3 (str. 79) opisana została autorska, hybrydowa metoda śledzenia ruchu człowieka, łącząca dane pochodzące z kontrolera Microsoft Kinect oraz czujników inercyjnych. Kolejne podrozdziały poświęcone są poszczególnym etapom przetwarzania danych w~prezentowanej metodzie. W pierwszym podrozdziale (3.1) przedstawiony jest format danych dostarczanych przez urządzenia pomiarowe, a także opis autorskiego urządzenia pomiarowego wykorzystującego czujniki inercyjne oraz platformę Arduino. Podrozdział 3.2 opisuje autorski algorytm kalibracji czujników inercyjnych oraz procedurę inicjalizacji filtru Madgwicka, wykorzystywanego do łączenia sygnałów pochodzących z żyroskopu oraz z akcelerometru. Podrozdział 3.3, będący realizacją drugiego celu szczegółowego, przedstawia metody kompensacji niedoskonałości urządzeń inercyjnych opisanych w rozdziale 2.3. Kolejny podrozdział (3.4) opisuje metodę wykorzystaną do określenia przesunięcia czasowego pomiędzy sygnałami pochodzącymi z czujników inercyjnych oraz z kontrolera Kinect, a także synchronizację tych sygnałów. Ostatni podrozdział (3.5) zawiera opis klasyfikacji odbieranych danych ze względu na ich wiarygodność, a tym samym na wybór metody łączenia otrzymanych sygnałów, które to zostały opisane w drugiej części tego podrozdziału. Informacje zawarte w rozdziale 3.5 są wypełnieniem trzeciego z założonych celi szczegółowych, natomiast realizację czwartego z nich przedstawia rozdział 4 (str.~103), w~którym zawarte są opisy przeprowadzonych eksperymentów oraz dyskusja dotycząca otrzymanych wyników. Rozdział 5 (str. 123), będący ostatnim rozdziałem zasadniczym, stanowi podsumowanie rozprawy. Zreasumowano w nim wyniki przeprowadzonych badań, sformułowano wnioski oraz wskazano możliwe kierunki rozwoju badań.

Ponadto w pracy znalazły sie dwa rozdziały dodatkowe, mające na celu przedstawienie informacji pomocnych w analizie omawianego tematu. Pierwszym z nich (dodatek A, str. 131) jest opis podstawowych filtrów stosowanych do łączenia sygnałów, a wykorzystywanych w przytoczonych, w niniejszej pracy, artykułach. Filtrami opisanymi w tym dodatku, w kolejności ich opisu, są: filtry Kalmana (liniowy, rozszerzony i bezśladowy), filtr komplementarny oraz filtry Mahoney’a i Madgwicka. W drugim dodatku (dodatek B) znajduje się ogólny opis wyznaczania i zastosowania wariancji Allana, będącej narzędziem pozwalającym na analizę charakterystyki szumów występujących w~elektronicznych urządzeniach pomiarowych, m.in. w czujnikach inercyjnych.

Dodatkowo, rozprawę rozpoczyna wykaz użytych skrótów i symboli, a kończą -- bibliografia oraz spisy tabel i rysunków.

W części związanej z przedstawieniem aktualnego stanu wiedzy dotyczącej omawianego zagadnienia, zaprezentowano przegląd istniejących systemów śledzenia ruchu. Szczególnie dużo uwagi poświęcono dwóm rodzajom takich systemów: optycznemu bezmarkerowemu oraz inercyjnemu. Rozszerzony opis tych dwóch systemów wynika z tego, że autorska metoda śledzenia ruchu wykorzystuje charakterystyczne właśnie dla nich urządzenia. Z tego też powodu szczególnie ważne jest, aby szerzej przedstawić czytelnikowi główne cechy tych systemów. Istotnym punktem rozprawy jest analiza budowy i działania kontrolera Kinect oraz czujników inercyjnych z uwzględnieniem ich ograniczeń. W toku badań własnych autora zidentyfikowane i opisane zostały następujące charakterystyki:

\begin{enumerate}
	\item wrażliwość kontrolera Kinect na występowanie dodatkowych źródeł światła podczerwonego -- w tym światła słonecznego lub drugiego kontrolera (str.~55);
	\item brak pełnej informacji o orientacji przestrzennej kości w danych otrzymywanych z kontrolera Kinect (str. 56), objawiający się brakiem informacji o~rotacji, w rozumieniu kątów Eulera (\emph{ang. roll}, str. 47);
	\item występowanie przysłaniania stawów w trakcie prowadzenia pomiarów przez Kinecta, w tym okluzji spowodowanej zbyt dużym obrotem sylwetki do płaszczyzny obserwacji Kinecta (str. 57);
	\item zmiana dokładności szacowania odległości pomiedzy kontrolerem Kinect a~użytkownikiem, w zależności gdzie użytkownik się znajduje (str. 60);
	\item wpływ temperatury urządzenia inercyjnego na jego pomiary (str. 68), wynikający z budowy tych czujników w architekturze MEMS (str. 64);
	\item brak pełnej informacji o orientacji przestrzennej modułu inercyjnego (str.~69), objawiający się brakiem informacji o skręcie, w rozumieniu kątów Eulera (\emph{ang. yaw}, str. 47);
\end{enumerate}

W części związanej z aktualnym stanem wiedzy, przedstawiony został także przegląd metod związanych z łączeniem optycznych, bezmarkerowych systemów śledzenia ruchu z systemami inercyjnymi. Analiza wyróżnionych w tej części pozycji bibliograficznych pozwala na wysunięcie następujących spostrzeżeń:

\begin{itemize}
\item najczęstszą metodą łączenia sygnałów pochodzących z bezmarkerowych, optycznych systemów śledzenia ruchu z sygnałami pochodzącymi z~systemów inercyjnych, jest filtr Kalmana,
\item sygnały łączone są ze sobą na podstawie informacji o położeniu wybranych stawów w przestrzeni,
\item autorzy nie uwzględniają w swoich metodach korekty błędów w danych źródłowych
\item deklarowany błąd szacowania pozycji w najdokładniejszej z opisanych metod wynosi około $2.2cm$ (metoda wykorzystana jako odniesienie do metody autorskiej. W prowadzonych badaniach własnych nie udało się osiągnąć deklarowanej dokładności).
\end{itemize}

Na podstawie powyższych zostały przygotowane metody kompensujące błędy związane z niewłaściwym określaniem odległości przez kontroler Kinect (str. 92) oraz z wpływem temperatury na pomiary modułów inercyjnych (str. 90), które wykorzystują formuły matematyczne charakteryzujące te błędy. Z uwagi na to, że brakujące informacje o orientacji przestrzennej dotyczą różnych osi, informacje te są uzupełniane w trakcie łączenia danych. Występowanie okluzji stawów zostało wykorzystane jako jeden ze wskaźników wiarygodności pomiarów kontrolera Kinect. Badając wartość kąta obrotu użytkownika względem kontrolera Kinect wraz ze stabilnością tego pomiaru oraz status śledzenia wybranych stawów, zdefiniowano kryteria czy można wykorzystać pomiary uzyskane z Kinecta w~procesie łączenia danych czy nie.

Zaprezentowana w pracy metoda zawiera nowe podejście do łączenia ze sobą danych z czujników inercyjnych i opisu modelu szkieletowego udostępnianego przez kontroler Kinect. Metoda ta, w odróżnieniu od już istniejących, łączy sygnały źródłowe w oparciu o informację o orientacji przestrzennej wybranych kości przyjętego modelu szkieletowego człowieka. Wykorzystanie charakterystyk obu urządzeń pomiarowych pozwala w istotny sposób naprawić dane źródłowe, które będą podlegały złączeniu, a także określić wiarygodność, a co za tym idzie -- istotność tych danych. Dzięki temu sama fuzja danych jest mniej złożona niż w~metodach opisanych w dostępnej literaturze, przedstawionej w rozdziale 2. 

Założeniem rozprawy było opracowanie i przedstawienie autorskiej, hybrydowej metody śledzenia ruchu człowieka, łączącej ze sobą sygnały kontrolera Kinect oraz czujników inercyjnych, uwzględniając i kompensując ograniczenia tychże urządzeń pomiarowych. Sformułowane w rozdziale 1 (str. 11) cele szczegółowe zostały osiągnięte, a postawiona teza -- potwierdzona. W pracy wykazano, że nowatorskie podejście do łączenia danych ze wspomnianych urządzeń pomiarowych, w oparciu o informacje o orientacji przestrzennej kości, z jednoczesną kompensacją znanych, mierzalnych błędów zawartych w danych źródłowych, zmniejsza błąd szacowania pozycji wybranych stawów w stosunku do tradycyjnych metod znanych z literatury.

W rozprawie zwrócono uwagę na niedoskonałości wykorzystywanych urządzeń pomiarowych, mające widoczny wpływ na dokładność i wiarygodność otrzymywanych danych. Dzięki temu udało się określić konteksty wykonywanego ruchu, jak na przykład obrót sylwetki śledzonej postaci względem kontrolera Kinect (str. 57), czy odległość od urządzenia pomiarowego, w jakiej znajdują się wybrane stawy (str. 60), które mają wpływ na uzyskiwane pomiary. Jednocześnie zostały zaproponowane metody kompensujące błędy występujące w uzyskanych pomiarach. Wskazano również, jak błędy, wynikające z kontekstu wykonywanego ruchu,wpływają na poszczególne pomiary. Na przykład, w zależności od odległości między wybranym stawem a kontrolerem Kinect, błąd oszacowania tej odległości przez urządzenie pomiarowe waha się od $10cm$ niedoszacowania do około $15cm$ przeszacowania (str. 62). Błędy te zostały opisane za pomocą formuł matematycznych lub zestawu cech charakteryzujących je, co pozwala na ich łatwą detekcję i kompensację.

Zaproponowaną metodę przetestowano na zestawie ćwiczeń, których ruch odbywał się zarówno w płaszczyźnie nie sprawiającej trudności w śledzeniu ruchu dla żadnego z urządzeń, jak i w takich płaszczyznach, w których ujawnione wcześniej niedoskonałości zostały szczególnie uwypuklone. Pozwoliło to na sprawdzenie proponowanej metody w sytuacji, kiedy dane z obu urządzeń pomiarowych są wystarczająco wiarygodne, aby można je było ze sobą połączyć, jak i w sytuacji, kiedy można polegać tylko na danych z jednego urządzenia. Z~uwagi na to, że jedną ze wskazanych motywacji podjęcia przez autora badań nad śledzeniem ruchu było wykorzystanie opracowanej metody w rehabilitacji ruchowej, ruchy wykonywane były w tempie właściwym dla tego obszaru zastosowań. Testy zostały wykonane na przykładzie ruchów ręki, jednakże nie ogranicza to uniwersalności zaproponowanego rozwiązania.

Wyniki uzyskane za pomocą autorskiej metody zostały porównane z opisaną w literaturze metodą, o najwyższej deklarowanej dokładności, na podstawie trzech parametrów: błędu szacowania pozycji stawu łokciowego, błędu szacowania pozycji stawu nadgarstkowego oraz błędu szacowania wartości kąta zgięcia ręki w łokciu. W przypadku tego porównania, błąd został zdefiniowany jako uśredniony błąd średniokwadratowy wyliczany ze wszystkich powtórzeń danego ruchu testowego. Eksperymenty wykazały poprawę wartości badanych parametrów wyznaczonych za pomocą metody autorskiej w porównaniu do metody zaczerpniętej z literatury maksymalnie o~18\% dla stawu łokciowego, 16\% dla nadgarstkowego i 11\% dla kąta zgięcia ręki w łokciu.

W związku z uzyskanymi wynikami, wykazane zostało, że śledzenie ruchu człowieka za pomocą systemu hybrydowego łączącego dane z kontrolera Kinect i~czujników inercyjnych, może być realizowane z powodzeniem w sposób alternatywny do metod opisanych w literaturze.

Opacowana i przedstawiona metoda może być przedmiotem dalszych badań i~rozwoju. Autor zidentyfikował kierunki, w których taki rozwój wydaje się być zasadny:

\begin{enumerate}
	\item uwzględnienie charakterystyki błędów działania i ich kompensacji dla kontrolera Kinect 2.0, działającego w oparciu o inną technologię niż wersja wykorzystana w niniejszej pracy;
	\item poszerzenie spektrum ruchów o te, charakterystyczne dla dyscyplin sportowych odznaczających się dużą dynamiką zmian. To z kolei może mieć wpływ na konieczność przedefiniowania kryteriów wykorzystywanych przy łączeniu danych ze względu na większą fragmentację otrzymanych danych;
	\item odporność proponowanego hybrydowego systemu śledzenia ruchu na warunki panujące w pomieszczeniu, gdzie odbywa się śledzenie. W trakcie prowadzonych badań, niejednokrotnie zdarzało się, że musiały być one przerwane ze względu na zakłócenia, jakim poddane były urządzenia pomiarowe, a przez to uszkodzenia danych pomiarowych. Wobec tego, zasadnym jest opracowanie metody zabezpieczania i naprawienia danych uszkodzonych w~trakcie transmisji;
	\item zmiana architektury autorskiego urządzenia agregującego sygnały z czujników inercyjnych z obecnej, opartej na jednym module centralnym i~kilku czujnikach inercyjnych podłączonych do niego (rys. 3.3, str. 84), na rzecz zestawu autonomicznych modułów inercyjnych, wysyłających samodzielnie dane do komputera przetwarzającego. Taka zmiana architektury wspomnianego urządzenia mogłaby jednak spowodować problemy synchronizacji sygnałów pomiędzy nawet kilkunastoma urządzeniami pomiarowymi, co mogłoby wprowadzić istotne błędy w śledzeniu ruchu postaci. Z tego powodu konieczne byłoby opracowanie osobnej metody niwelowania tych problemów.
\end{enumerate}




\end{document}